<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: true,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="In the previous article Fee Delegation-MPP, I introduced MPP, the prototype-based transaction fee delegation protocol. I also mentioned that it cannot meet the needs of developers in several circumsta">
<meta name="keywords" content="dapp,mpp,fee delegation,vip191,transaction fee">
<meta property="og:type" content="article">
<meta property="og:title" content="Fee Delegation-VIP191">
<meta property="og:url" content="https://blog.outofgas.io/2019/08/13/Fee-Delegation-VIP191-en/index.html">
<meta property="og:site_name" content="Insufficient Enerngy">
<meta property="og:description" content="In the previous article Fee Delegation-MPP, I introduced MPP, the prototype-based transaction fee delegation protocol. I also mentioned that it cannot meet the needs of developers in several circumsta">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-08-14T07:06:32.685Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fee Delegation-VIP191">
<meta name="twitter:description" content="In the previous article Fee Delegation-MPP, I introduced MPP, the prototype-based transaction fee delegation protocol. I also mentioned that it cannot meet the needs of developers in several circumsta">





  
  
  <link rel="canonical" href="https://blog.outofgas.io/2019/08/13/Fee-Delegation-VIP191-en/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Fee Delegation-VIP191 | Insufficient Enerngy</title>
  




  <script async src="//www.googletagmanager.com/gtag/js?id=UA-142494873-2"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-142494873-2');
    }
  </script>









  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Insufficient Enerngy</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.outofgas.io/2019/08/13/Fee-Delegation-VIP191-en/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tony.li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Insufficient Enerngy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Fee Delegation-VIP191

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-08-13 17:50:08" itemprop="dateCreated datePublished" datetime="2019-08-13T17:50:08+00:00">2019-08-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-14 07:06:32" itemprop="dateModified" datetime="2019-08-14T07:06:32+00:00">2019-08-14</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>In the previous article <a href="/2019/08/13/Fee-Delegation-MPP-en/" title="Fee Delegation-MPP">Fee Delegation-MPP</a>, I introduced MPP, the <code>prototype-based transaction fee delegation protocol</code>. I also mentioned that it cannot meet the needs of developers in several circumstances. Noticeably, <a href="https://www.totientlabs.com/" target="_blank" rel="noopener">Totient Labs</a> combined multiple contracts in one transaction when developing <a href="https://play.cometverse.com/" target="_blank" rel="noopener">CometVerse</a>, and they also wished to pay transaction fees for the users. Therefore, <a href="https://www.totientlabs.com/" target="_blank" rel="noopener">Totient Labs</a> brought up <a href="https://github.com/vechain/VIPs/blob/master/vips/VIP-191.md" target="_blank" rel="noopener">VIP-191</a> to extend the transaction fee delegation protocol.</p>
<h2 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Content</h2><p>VIP-191 was proposed to extend the fee delegation protocol and to further explore its application scenarios, so as to make up for situations not covered by <code>MPP</code>. It includes:</p>
<ol>
<li>Extending the TX model by adding Delegator signature.</li>
<li>Identifying VIP-191 enabled Txs by setting Fee Delegated true.</li>
</ol>
<a id="more"></a>
<h2 id="Transaction-construction"><a href="#Transaction-construction" class="headerlink" title="Transaction construction"></a>Transaction construction</h2><ol>
<li>Construct unsigned TX and set <code>Fee Delegated Flag</code> to true.</li>
<li>Construct TX signature with both <code>TxOrigin</code> signature &amp; <code>Delegator</code> signature(order of these does not matter).</li>
<li>Construct complete TX with the completed signature, and broadcast it to the blockchain.</li>
</ol>
<h2 id="Transaction-fee-deduction"><a href="#Transaction-fee-deduction" class="headerlink" title="Transaction fee deduction"></a>Transaction fee deduction</h2><p>When executing transactions which enabled <code>VIP-191</code>, blockchain will (and will only) deduct transaction fee from the <code>Delegator</code>. As for others, <code>MPP</code> should be applied, or transaction fee should be deducted from the <code>TxOrigin</code> directly.</p>
<h2 id="MPP-vs-VIP-191"><a href="#MPP-vs-VIP-191" class="headerlink" title="MPP vs VIP-191"></a>MPP vs VIP-191</h2><p>To summarize the differences between MPP and VIP-191:</p>
<ul>
<li><code>MPP</code>: Delegation relationship stored in the prototype of the account(on-chain), and <mark>once deployed it becomes active everywhere else</mark>.</li>
<li><code>VIP-191</code>: Delegation relationship stored outside blockchain(an independent Delegator service), and the action of delegation is <mark>explicitly declared in TX and there should be no specific requirement for the content of TX</mark>.</li>
</ul>
<h2 id="Applications"><a href="#Applications" class="headerlink" title="Applications"></a>Applications</h2><h3 id="Blockchain-Application-Developers"><a href="#Blockchain-Application-Developers" class="headerlink" title="Blockchain Application Developers"></a>Blockchain Application Developers</h3><p>Application developers can set up <code>Delegator Service</code> exclusively for their own applications, for the purpose of providing users with transaction fee delegation services. Thereafter, users can try out applications without paying fees.</p>
<h3 id="Wallet-Developers"><a href="#Wallet-Developers" class="headerlink" title="Wallet Developers"></a>Wallet Developers</h3><p>Wallet developers can achieve <code>Self delegate</code>, which means when a user has multiple accounts, the wallet can provide users with an alternative function during payment confirmation, which allows users to choose other accounts beside <code>TxOrigin</code> to pay for the transaction fee, and the account is known as <code>GasPayer</code>. In this way, users can store VTHO in only one account, while other accounts don’t have to possess VTHO.</p>
<h3 id="Exchange-Developers"><a href="#Exchange-Developers" class="headerlink" title="Exchange Developers"></a>Exchange Developers</h3><p>Take the advantage of VIP-191, exchange developers can simplify the process of accumulating assets(especially tokens) and reduce VTHO consumption. Exchange can make an independent fee payer account to pay for all the transaction fees by setting a specific <code>Delegator Gateway</code>, and there is no need to transfer transaction fee to sender’s address: let sender initiates a VIP-191 enabled Tx, attaches the TxOrigin signature, and send it to the gateway. The gateway will then attach the <code>Delegator Signature</code> and send it to blockchain.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Together, <code>MPP</code> and <code>VIP-191</code> constructed VeChain’s <code>transaction fee delegation protocol</code>. It offers more possibilities to developers and achieves a more friendly user experience to all users.</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/dapp/" rel="tag"># dapp</a>
          
            <a href="/tags/mpp/" rel="tag"># mpp</a>
          
            <a href="/tags/fee-delegation/" rel="tag"># fee delegation</a>
          
            <a href="/tags/vip191/" rel="tag"># vip191</a>
          
            <a href="/tags/transaction-fee/" rel="tag"># transaction fee</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/05/Fee-Delegation-VIP191-zh/" rel="next" title="Fee Delegation - VIP191(中文版)">
                <i class="fa fa-chevron-left"></i> Fee Delegation - VIP191(中文版)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/08/13/Fee-Delegation-MPP-en/" rel="prev" title="Fee Delegation-MPP">
                Fee Delegation-MPP <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">tony.li</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">15</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Content"><span class="nav-number">1.</span> <span class="nav-text">Content</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Transaction-construction"><span class="nav-number">2.</span> <span class="nav-text">Transaction construction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Transaction-fee-deduction"><span class="nav-number">3.</span> <span class="nav-text">Transaction fee deduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MPP-vs-VIP-191"><span class="nav-number">4.</span> <span class="nav-text">MPP vs VIP-191</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Applications"><span class="nav-number">5.</span> <span class="nav-text">Applications</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Blockchain-Application-Developers"><span class="nav-number">5.1.</span> <span class="nav-text">Blockchain Application Developers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Wallet-Developers"><span class="nav-number">5.2.</span> <span class="nav-text">Wallet Developers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Exchange-Developers"><span class="nav-number">5.3.</span> <span class="nav-text">Exchange Developers</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Conclusion"><span class="nav-number">6.</span> <span class="nav-text">Conclusion</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tony.li</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a></div>




        








        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>




  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
